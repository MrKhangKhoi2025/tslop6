<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <meta name="description" content="Tra c·ª©u t·ª´ ƒëi·ªÉn ti·∫øng X√™ ƒêƒÉng, X∆° ƒêƒÉng v√† 54 d√¢n t·ªôc Vi·ªát Nam ch√≠nh x√°c. H·ªó tr·ª£ ph√°t √¢m, phi√™n √¢m v√† d·ªãch thu·∫≠t song ng·ªØ">
    <meta name="keywords" content="t·ª´ ƒëi·ªÉn x√™ ƒëƒÉng, t·ª´ ƒëi·ªÉn x∆° ƒëƒÉng, tra c·ª©u ti·∫øng x√™ ƒëƒÉng, d·ªãch ti·∫øng d√¢n t·ªôc, ti·∫øng x∆° ƒëƒÉng vi·ªát">
    <title>T·ª´ ƒêi·ªÉn Ti·∫øng X∆° ƒêƒÉng - Ti·∫øng Kinh | Tra C·ª©u Ch√≠nh X√°c</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --highlight-color: #ff6b6b;
            --background-gradient: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            --transition-speed: 0.3s;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: var(--background-gradient);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            line-height: 1.6;
            color: var(--primary-color);
        }

        .container {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            width: 95%;
            max-width: 800px;
            margin: 2rem auto;
            transition: transform var(--transition-speed) ease;
            backdrop-filter: blur(10px);
        }

        header {
            text-align: center;
            padding: 1.5rem 0;
        }

        h1 {
            color: var(--primary-color);
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            margin-bottom: 1.5rem;
            line-height: 1.3;
            text-transform: uppercase; /* In hoa ti√™u ƒë·ªÅ */
        }

        #searchForm {
            display: grid;
            gap: 1rem;
            grid-template-columns: 1fr auto;
        }

        .input-group {
            display: grid;
            gap: 0.5rem;
            position: relative;
        }

        .form-label {
            font-weight: 600; /* Ch·ªØ ƒë·∫≠m */
            font-size: 1.1rem; /* K√≠ch th∆∞·ªõc ch·ªØ ph√π h·ª£p */
            color: var(--primary-color); /* M√†u ƒë·ªìng nh·∫•t */
            text-transform: uppercase; /* In hoa */
        }

        input[type="text"],
        select {
            padding: 0.8rem 1.2rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            width: 100%;
            transition: all var(--transition-speed) ease;
            appearance: none;
        }

        select {
            background: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e") no-repeat right 0.8rem center/16px 16px;
            padding-right: 2.5rem;
        }

        input[type="text"]:focus,
        select:focus {
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
            outline: none;
        }

        button {
            padding: 0.8rem 1.8rem;
            background: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: 
                background-color var(--transition-speed) ease,
                transform 0.2s ease,
                box-shadow 0.2s ease;
            box-shadow: 0 2px 8px rgba(52, 152, 219, 0.2);
        }

        button:hover {
            background: #2980b9;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
        }

        .result-container {
            margin-top: 2rem;
            padding: 2rem;
            background: #fff;
            border-radius: 12px;
            border: 2px solid var(--secondary-color);
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.15);
            min-height: 150px;
        }

        .word-card {
            display: grid;
            gap: 1rem;
            padding: 1.5rem;
            background: #f8fafc;
            border-radius: 8px;
            border-left: 4px solid var(--accent-color);
        }

        .word,
        .translation,
        .pronunciation {
            font-size: 1.1rem;
            color: var(--primary-color);
        }

        .word strong,
        .translation strong,
        .pronunciation strong {
            color: var(--primary-color);
            font-weight: 700;
            font-size: 1.1rem;
        }

        .word span,
        .translation span,
        .pronunciation span {
            color: var(--accent-color);
            font-weight: 700;
            font-size: 1.3rem;
        }

        .error {
            color: #e74c3c;
            padding: 1.5rem;
            background: #fdeded;
            border-radius: 8px;
            margin: 1rem 0;
            border: 1px solid #f5c6cb;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 1.5rem;
            color: var(--secondary-color);
            font-size: 1.1rem;
        }

        .no-result {
            color: var(--primary-color);
            text-align: center;
            padding: 2rem;
            font-style: italic;
        }

        @media (max-width: 768px) {
            #searchForm {
                grid-template-columns: 1fr;
            }
            
            .container {
                padding: 1.5rem;
                margin: 1rem;
            }
            
            .word,
            .translation,
            .pronunciation {
                font-size: 1rem;
            }
            
            .word strong,
            .translation strong,
            .pronunciation strong {
                font-size: 1rem;
            }
            
            .word span,
            .translation span,
            .pronunciation span {
                font-size: 1.2rem;
            }
            
            .result-container {
                padding: 1.5rem;
            }
            
            button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <header role="banner">
        <div class="container">
            <h1>Tra C·ª©u Ti·∫øng X∆° ƒêƒÉng - Ti·∫øng Kinh</h1>
            <form id="searchForm" role="search">
                <div class="input-group">
                    <label for="word" class="form-label">Nh·∫≠p t·ª´ c·∫ßn tra</label>
                    <input type="text" 
                           id="word" 
                           placeholder="Nh·∫≠p t·ª´ c·∫ßn tra c·ª©u (v√≠ d·ª•: ƒÉn c∆°m, ka me...)"
                           autocomplete="off"
                           aria-describedby="searchHelp"
                           list="suggestions">
                    <datalist id="suggestions"></datalist>
                </div>
                <div class="input-group">
                    <label for="direction" class="form-label">Ch·ªçn h∆∞·ªõng d·ªãch</label>
                    <select id="direction">
                        <option value="viet_to_ethnic">Ti·∫øng Kinh ‚Üí X∆° ƒêƒÉng</option>
                        <option value="ethnic_to_viet">X∆° ƒêƒÉng ‚Üí Ti·∫øng Kinh</option>
                    </select>
                </div>
                <button type="submit">
                    üîç Tra c·ª©u
                </button>
            </form>
            <div class="loading" id="loading">ƒêang t·∫£i d·ªØ li·ªáu...</div>
        </div>
    </header>

    <main class="container" role="main">
        <section aria-live="polite" aria-atomic="true">
            <div class="result-container" id="resultContainer">
                <div id="result"></div>
                <div id="error" class="error" role="alert" hidden></div>
            </div>
        </section>
    </main>

    <script>
        (function() {
            const config = {
                API_KEY: 'AIzaSyD757jS4SLR7-EzrPgrW9WrLQeD2DQExHw',
                SHEET_ID: '1Z59pDBu_tGwlYqUeS1-VJLpcHozp7LbxnC_-qhT3iHs',
                RANGE: 'Sheet1!A2:C'
            };

            let dictionary = [];
            let initialized = false;

            const dom = {
                searchForm: document.getElementById('searchForm'),
                wordInput: document.getElementById('word'),
                directionSelect: document.getElementById('direction'),
                resultDiv: document.getElementById('result'),
                errorDiv: document.getElementById('error'),
                loading: document.getElementById('loading'),
                suggestions: document.getElementById('suggestions')
            };

            function showLoading() {
                dom.loading.style.display = 'block';
            }

            function hideLoading() {
                dom.loading.style.display = 'none';
            }

            function showError(message) {
                dom.errorDiv.textContent = message;
                dom.errorDiv.hidden = false;
                dom.resultDiv.innerHTML = '';
            }

            function clearResults() {
                dom.errorDiv.hidden = true;
                dom.resultDiv.innerHTML = '';
            }

            async function fetchDictionary() {
                try {
                    showLoading();
                    const url = `https://sheets.googleapis.com/v4/spreadsheets/${config.SHEET_ID}/values/${config.RANGE}?key=${config.API_KEY}`;
                    const response = await fetch(url);
                    
                    if (!response.ok) throw new Error(`L·ªói m·∫°ng: ${response.status}`);
                    
                    const data = await response.json();
                    
                    if (!data.values?.length) throw new Error('Kh√¥ng t√¨m th·∫•y d·ªØ li·ªáu');
                    
                    dictionary = data.values.map(row => ({
                        ethnic: row[0]?.trim().toLowerCase() || '',
                        viet: row[1]?.trim().toLowerCase() || '',
                        pronunciation: row[2]?.trim() || ''
                    })).filter(item => item.ethnic && item.viet);
                    
                    initialized = true;
                    console.log('D·ªØ li·ªáu ƒë√£ t·∫£i:', dictionary.length, 't·ª´');
                } catch (error) {
                    showError(`L·ªói t·∫£i d·ªØ li·ªáu: ${error.message}`);
                    console.error('L·ªói:', error);
                } finally {
                    hideLoading();
                }
            }

            function searchTerm(term) {
                const cleanTerm = term.toLowerCase().trim();
                const direction = dom.directionSelect.value;
                return direction === 'ethnic_to_viet' 
                    ? dictionary.find(item => item.ethnic === cleanTerm)
                    : dictionary.find(item => item.viet === cleanTerm);
            }

            function renderResult(entry) {
                if (!entry) return '<p class="no-result">Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£ ph√π h·ª£p</p>';
                
                const isEthnicToViet = dom.directionSelect.value === 'ethnic_to_viet';
                const ethnicWord = isEthnicToViet ? entry.ethnic : entry.viet;
                const vietWord = isEthnicToViet ? entry.viet : entry.ethnic;
                const pronunciation = entry.pronunciation;

                return `
                    <article class="word-card">
                        <p class="word"><strong>Ti·∫øng X∆° ƒêƒÉng:</strong> <span>${ethnicWord}</span></p>
                        <p class="translation"><strong>Ti·∫øng Kinh:</strong> <span>${vietWord}</span></p>
                        ${pronunciation ? `<p class="pronunciation"><strong>Ph√°t √¢m:</strong> <span>${pronunciation}</span></p>` : ''}
                    </article>
                `;
            }

            function handleSearch(event) {
                event.preventDefault();
                const rawTerm = dom.wordInput.value.trim();
                const term = rawTerm.toLowerCase();
                
                if (!term) {
                    showError('Vui l√≤ng nh·∫≠p t·ª´ c·∫ßn tra c·ª©u');
                    return;
                }
                
                if (!initialized) {
                    showError('H·ªá th·ªëng ch∆∞a s·∫µn s√†ng, vui l√≤ng th·ª≠ l·∫°i sau');
                    return;
                }

                clearResults();
                
                const result = searchTerm(term);
                dom.resultDiv.innerHTML = renderResult(result);
                dom.wordInput.value = rawTerm; // Gi·ªØ nguy√™n ƒë·ªãnh d·∫°ng nh·∫≠p ban ƒë·∫ßu
            }

            function initAutocomplete() {
                dom.wordInput.addEventListener('input', function() {
                    const term = this.value.toLowerCase().trim();
                    dom.suggestions.innerHTML = '';
                    
                    if (term.length < 1) return;
                    
                    const suggestions = dictionary
                        .filter(item => 
                            item.ethnic.includes(term) ||
                            item.viet.includes(term)
                        )
                        .slice(0, 10);
                    
                    suggestions.forEach(item => {
                        const option = document.createElement('option');
                        option.value = dom.directionSelect.value === 'ethnic_to_viet' ? item.ethnic : item.viet;
                        dom.suggestions.appendChild(option);
                    });
                });
            }

            dom.searchForm.addEventListener('submit', handleSearch);
            dom.directionSelect.addEventListener('change', () => dom.wordInput.value = '');
            
            // Kh·ªüi ƒë·ªông ·ª©ng d·ª•ng
            fetchDictionary().then(initAutocomplete);
        })();
    </script>
</body>
</html>